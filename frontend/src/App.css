/* ── Layout ───────────────────────────────────────────────── */

.app {
    display: flex;
    flex-direction: column;
    height: 100vh;
    overflow: hidden;
}

.app-empty-state {
    flex: 1;
    display: grid;
    place-items: center;
    padding: 32px;
    position: relative;
    background:
        radial-gradient(
            1200px 600px at 50% 20%,
            light-dark(rgba(59, 130, 246, 0.12), rgba(59, 130, 246, 0.08)),
            transparent 60%
        ),
        light-dark(#f4f7ff, #05070b);
}

.app-empty-state::before {
    content: "";
    position: absolute;
    inset: 0;
    background: light-dark(rgba(255, 255, 255, 0.18), rgba(0, 0, 0, 0.38));
    pointer-events: none;
}

.app-empty-card {
    position: relative;
    width: min(700px, calc(100vw - 80px));
    text-align: center;
    border: 1px solid light-dark(rgba(20, 30, 46, 0.1), rgba(255, 255, 255, 0.08));
    border-radius: 22px;
    padding: 32px 36px;
    background: linear-gradient(
        180deg,
        light-dark(rgba(255, 255, 255, 0.88), rgba(255, 255, 255, 0.03)),
        light-dark(rgba(250, 252, 255, 0.82), rgba(255, 255, 255, 0.01))
    );
    background-color: light-dark(#eef3ff, #0b1118);
    display: flex;
    flex-direction: column;
    gap: 0;
    align-items: center;
    box-shadow:
        0 40px 80px light-dark(rgba(43, 72, 122, 0.2), rgba(0, 0, 0, 0.6)),
        inset 0 1px 0 light-dark(rgba(255, 255, 255, 0.65), rgba(255, 255, 255, 0.04));
    backdrop-filter: blur(8px);
}

.app-empty-card h1 {
    font-size: clamp(30px, 4vw, 42px);
    line-height: 1.1;
    font-weight: 800;
    letter-spacing: -0.035em;
    color: light-dark(rgba(20, 26, 34, 0.96), rgba(255, 255, 255, 0.95));
}

.app-empty-card p {
    font-size: var(--font-size-md);
    color: light-dark(rgba(42, 51, 64, 0.72), rgba(255, 255, 255, 0.55));
    line-height: 1.45;
    max-width: 640px;
    margin-top: 10px;
}

.app-empty-anchor {
    margin-top: 24px;
    width: 68px;
    height: 68px;
    border-radius: 999px;
    display: grid;
    place-items: center;
    background: light-dark(rgba(59, 130, 246, 0.14), rgba(59, 130, 246, 0.08));
    border: 1px solid light-dark(rgba(59, 130, 246, 0.25), rgba(59, 130, 246, 0.18));
    color: light-dark(rgba(31, 92, 195, 0.95), rgba(59, 130, 246, 0.9));
    box-shadow: inset 0 1px 0 light-dark(rgba(255, 255, 255, 0.85), rgba(255, 255, 255, 0.07));
}

.app-empty-state-block {
    width: min(640px, 100%);
    margin-top: 18px;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.app-empty-connection-count {
    font-size: var(--font-size-lg);
    font-family: var(--font-mono);
    color: light-dark(rgba(33, 43, 57, 0.8), rgba(255, 255, 255, 0.75));
    line-height: 1.3;
}

.app-empty-live {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

.app-empty-transition {
    margin-top: 12px;
    width: min(540px, 100%);
    transition:
        opacity 180ms ease,
        transform 180ms ease;
}

.app-empty-transition--connected {
    opacity: 1;
    transform: translateY(0);
}

.app-empty-transition--waiting {
    opacity: 1;
    transform: translateY(0);
}

.app-empty-connected-group {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    animation: connectedIn 180ms ease;
}

.app-empty-connected-list {
    width: min(540px, 100%);
    max-height: 280px;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
    gap: 8px;
    overflow-y: auto;
    padding-right: 4px;
}

.app-empty-connected-item {
    width: 100%;
    font-family: var(--font-mono);
    font-size: var(--font-size-sm);
    color: light-dark(rgba(25, 35, 50, 0.88), rgba(255, 255, 255, 0.85));
    background: light-dark(rgba(255, 255, 255, 0.72), rgba(255, 255, 255, 0.04));
    border: 1px solid light-dark(rgba(31, 67, 119, 0.16), rgba(255, 255, 255, 0.1));
    border-radius: 10px;
    padding: 8px 10px;
    min-width: 0;
    box-shadow: inset 0 1px 0 light-dark(rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.04));
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    line-height: 1.2;
    display: inline-flex;
    align-items: center;
    gap: 6px;
}

.app-empty-connected-item-icon {
    color: light-dark(rgba(42, 99, 201, 0.95), rgba(148, 197, 255, 0.95));
    flex-shrink: 0;
}

.app-empty-connected-item-text {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.app-empty-connected-more {
    margin-top: 0;
    font-size: var(--font-size-md);
    font-family: var(--font-mono);
    color: light-dark(rgba(58, 69, 83, 0.65), rgba(255, 255, 255, 0.52));
}

.app-empty-connected-processes {
    margin-top: 0;
    font-size: var(--font-size-md);
    font-family: var(--font-mono);
    color: light-dark(rgba(58, 69, 83, 0.7), rgba(255, 255, 255, 0.6));
    max-width: 56ch;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.app-empty-waiting-group {
    width: min(560px, 100%);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    gap: 12px;
    animation: waitingIn 150ms ease;
}

.app-empty-pulse {
    display: block;
    width: 10px;
    height: 10px;
    border-radius: 999px;
    margin: 0 auto;
    align-self: center;
    background: rgba(59, 130, 246, 0.8);
    box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.6);
    animation: pulse 2s infinite;
}

.app-empty-waiting-line {
    margin-top: 0;
    font-size: var(--font-size-lg);
    font-weight: 600;
    color: light-dark(rgba(22, 31, 44, 0.92), rgba(255, 255, 255, 0.9));
    line-height: 1.3;
}

.app-empty-helper-text {
    margin-top: 0;
    font-size: var(--font-size-md);
    color: light-dark(rgba(46, 57, 72, 0.7), rgba(255, 255, 255, 0.55));
    line-height: 1.45;
}

.app-empty-helper-caption {
    margin-top: 0;
    font-size: var(--font-size-md);
    color: light-dark(rgba(53, 64, 79, 0.65), rgba(255, 255, 255, 0.45));
}

.app-empty-progress {
    margin-top: 16px;
    font-size: var(--font-size-sm);
    color: light-dark(rgba(48, 60, 78, 0.75), rgba(255, 255, 255, 0.62));
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.app-empty-progress-list {
    font-family: var(--font-mono);
    font-size: var(--font-size-sm);
    color: light-dark(rgba(34, 46, 65, 0.84), rgba(255, 255, 255, 0.78));
}

@media (max-width: 720px) {
    .app-empty-state {
        padding: 16px;
    }

    .app-empty-card {
        width: min(700px, calc(100vw - 24px));
        padding: 24px 20px;
        border-radius: 18px;
    }

    .app-empty-anchor {
        width: 56px;
        height: 56px;
        margin-top: 18px;
    }

    .app-empty-connected-item {
        white-space: normal;
        word-break: break-word;
    }
}

.header {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 6px 12px;
    border-bottom: 1px solid light-dark(#d2d2d7, #2a2a2e);
    background: light-dark(#ffffff, #141416);
    flex-shrink: 0;
}

.header-title {
    font-weight: 700;
    font-size: var(--font-size-md);
    letter-spacing: -0.02em;
}

.header-spacer {
    flex: 1;
}

.snapshot-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-size: var(--font-size-sm);
    padding: 2px 8px;
    border-radius: 4px;
    background: light-dark(#e8e8ed, #2a2a2e);
    color: light-dark(#6e6e73, #98989d);
}

.snapshot-badge--active {
    background: light-dark(#d1e7dd, #1a3a2a);
    color: light-dark(#0f5132, #75b798);
}

.snapshot-badge--interactive {
    border: 0;
    font-family: inherit;
    line-height: 1;
    cursor: pointer;
}

.snapshot-badge--interactive:hover {
    filter: brightness(0.95);
}

.snapshot-badge--interactive:focus-visible {
    outline: 1px solid light-dark(#8ec5ff, #4da6ff);
    outline-offset: 2px;
}

.snapshot-progress {
    display: inline-flex;
    flex-direction: column;
    gap: 4px;
    min-width: 132px;
}

.snapshot-progress__label {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-size: var(--font-size-sm);
    color: light-dark(#6e6e73, #b5b5bb);
}

.snapshot-progress__meta {
    display: inline-block;
    font-family: var(--font-mono);
    font-size: var(--font-size-sm);
    color: light-dark(#6e6e73, #8f8f95);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.snapshot-progress__spinner {
    animation: spin 1s linear infinite;
}

.snapshot-progress__bar {
    position: relative;
    height: 4px;
    border-radius: 999px;
    overflow: hidden;
    background: light-dark(#e5e5ea, #2a2a2e);
}

.snapshot-progress__bar::after {
    content: "";
    position: absolute;
    left: -36%;
    width: 36%;
    top: 0;
    bottom: 0;
    border-radius: 999px;
    background: linear-gradient(90deg, light-dark(#0f5132, #4caf7a), light-dark(#34c759, #75b798));
    animation: indeterminate 1.2s ease-in-out infinite;
}

.snapshot-process-modal-backdrop {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 14px;
    background: light-dark(rgba(1, 1, 1, 0.48), rgba(0, 0, 0, 0.56));
    z-index: 999;
}

.snapshot-process-modal {
    width: min(1100px, calc(100vw - 30px));
    max-height: calc(100vh - 30px);
    background: light-dark(#ffffff, #15171d);
    border: 1px solid light-dark(#e5e5ea, #2a2a2e);
    border-radius: 12px;
    box-shadow: 0 16px 40px light-dark(rgba(0, 0, 0, 0.28), rgba(0, 0, 0, 0.7));
    padding: 10px 12px;
    color: light-dark(#1d1d1f, #ececf2);
    overflow: hidden;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.snapshot-process-modal__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
}

.snapshot-process-modal__title-wrap {
    display: flex;
    flex-direction: column;
    gap: 2px;
    min-width: 0;
}

.snapshot-process-modal__title {
    font-size: var(--font-size-md);
    font-weight: 700;
    color: light-dark(#121217, #f4f5f9);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.snapshot-process-modal__subtitle {
    font-size: var(--font-size-sm);
    color: light-dark(#6e6e73, #9ca0a6);
}

.snapshot-process-modal__close {
    border: 0;
    border-radius: 7px;
    width: 28px;
    height: 28px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: light-dark(#3a3a3c, #dbdce2);
    background: light-dark(#f2f2f7, #262a31);
    cursor: pointer;
}

.snapshot-process-modal__close:hover {
    background: light-dark(#e6e6ec, #343941);
}

.snapshot-process-modal__message {
    font-family: var(--font-mono);
    font-size: var(--font-size-sm);
    color: light-dark(#0f5132, #75b798);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.snapshot-process-modal__table-wrap {
    border: 1px solid light-dark(#e5e5ea, #2a2a2e);
    border-radius: 8px;
    overflow: auto;
    max-height: 55vh;
}

.snapshot-process-modal__empty {
    color: light-dark(#6e6e73, #9ca0a6);
    font-size: var(--font-size-sm);
    padding: 18px;
}

.snapshot-process-table {
    width: 100%;
    border-collapse: collapse;
    min-width: 860px;
    font-size: var(--font-size-sm);
}

.snapshot-process-table th {
    text-align: left;
    position: sticky;
    top: 0;
    z-index: 1;
    background: light-dark(#f4f4f7, #1c1d22);
    color: light-dark(#5f6368, #bfc1c6);
    font-weight: 700;
    font-size: var(--font-size-sm);
    padding: 7px 8px;
    border-bottom: 1px solid light-dark(#d2d2d7, #2a2a2e);
}

.snapshot-process-table tbody tr {
    border-top: 1px solid light-dark(rgba(0, 0, 0, 0.08), rgba(255, 255, 255, 0.06));
}

.snapshot-process-table__row--missing {
    background: light-dark(rgba(255, 243, 205, 0.4), rgba(67, 46, 21, 0.45));
}

.snapshot-process-table td {
    padding: 7px 8px;
    vertical-align: top;
}

.snapshot-process-table__mono {
    font-family: var(--font-mono);
}

.snapshot-process-table__status {
    display: inline-flex;
    padding: 1px 6px;
    border-radius: 999px;
    font-size: var(--font-size-sm);
    text-transform: capitalize;
}

.snapshot-process-table__status--missing {
    background: light-dark(#fff4ce, #4a3411);
    color: light-dark(#7c5600, #ffd37a);
}

.snapshot-process-table__status--responded {
    background: light-dark(rgba(198, 246, 213, 0.85), rgba(28, 66, 48, 0.5));
    color: light-dark(#0f5132, #8ada9f);
}

.snapshot-process-table__status--normal {
    background: light-dark(rgba(246, 247, 251, 0.9), rgba(45, 46, 51, 0.65));
    color: light-dark(#5f6368, #b3b8bf);
}

.snapshot-process-table__command {
    max-width: 360px;
    font-family: var(--font-mono);
    color: light-dark(#4f5f7a, #9fb2d1);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.snapshot-process-table__actions {
    display: inline-flex;
    flex-wrap: wrap;
    gap: 5px;
    align-items: center;
}

.snapshot-process-btn {
    border: 1px solid light-dark(#cfd4dc, #404048);
    background: light-dark(#f3f4f8, #26262d);
    color: light-dark(#45454c, #d8dbe0);
    border-radius: 4px;
    padding: 2px 6px;
    font-size: var(--font-size-sm);
    line-height: 1;
    display: inline-flex;
    align-items: center;
    gap: 4px;
    text-decoration: none;
    cursor: pointer;
}

.snapshot-process-btn:hover {
    background: light-dark(#e2e6f0, #303038);
}

.snapshot-process-btn--loading {
    cursor: default;
    pointer-events: none;
}

.snapshot-process-btn__spinner {
    animation: spin 1s linear infinite;
}

.snapshot-process-btn:disabled {
    cursor: not-allowed;
    opacity: 0.5;
}

@media (max-width: 760px) {
    .snapshot-process-modal {
        width: min(1020px, calc(100vw - 12px));
        max-height: calc(100vh - 12px);
        padding: 8px;
    }

    .snapshot-process-table {
        min-width: 760px;
    }

    .snapshot-process-table__command {
        max-width: 300px;
    }
}

/* ── Buttons ──────────────────────────────────────────────── */

.btn {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 3px 8px;
    border: 1px solid light-dark(#d2d2d7, #3a3a3e);
    border-radius: 3px;
    background: light-dark(#ffffff, #2a2a2e);
    color: inherit;
    font: inherit;
    font-size: var(--font-size-sm);
    cursor: pointer;
    white-space: nowrap;
    transition:
        transform 120ms ease,
        filter 120ms ease,
        background-color 120ms ease,
        box-shadow 120ms ease;
}

.btn:hover {
    background: light-dark(#f0f0f5, #363638);
}

.btn:active {
    background: light-dark(#e5e5ea, #444448);
}

.btn:disabled {
    opacity: 0.45;
    cursor: not-allowed;
    transform: none;
    filter: none;
}

.btn--primary {
    background: light-dark(#1d1d1f, #e5e5e7);
    color: light-dark(#fff, #1d1d1f);
    border-color: transparent;
}

.btn--primary:hover {
    background: light-dark(#333, #d0d0d0);
}

.btn--loading {
    opacity: 0.6;
    pointer-events: none;
}

.btn--hero {
    margin-top: 34px;
    min-height: 56px;
    padding: 0 26px;
    border-radius: 4px;
    font-size: var(--font-size-lg);
    font-weight: 600;
    gap: 11px;
    box-shadow:
        0 10px 25px rgba(59, 130, 246, 0.35),
        inset 0 1px 0 rgba(255, 255, 255, 0.25);
    transition:
        transform 120ms ease,
        filter 120ms ease,
        box-shadow 120ms ease,
        opacity 180ms ease;
}

.btn--hero:hover:not(:disabled) {
    filter: brightness(1.05);
    transform: translateY(-1px);
    box-shadow:
        0 14px 30px rgba(59, 130, 246, 0.45),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

.btn--hero:active:not(:disabled) {
    filter: brightness(0.98);
    transform: translateY(0);
}

.btn--hero:disabled {
    background: light-dark(rgba(224, 232, 244, 0.95), rgba(255, 255, 255, 0.1));
    border-color: transparent;
    color: light-dark(rgba(76, 86, 101, 0.72), rgba(255, 255, 255, 0.35));
    box-shadow: none;
}

.btn:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px light-dark(rgba(0, 0, 0, 0.15), rgba(255, 255, 255, 0.2));
    border-color: light-dark(#999, #666);
}

/* ── Status ───────────────────────────────────────────────── */

.status-bar {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 4px 12px;
    font-size: var(--font-size-sm);
    color: light-dark(#6e6e73, #98989d);
    background: light-dark(#fff3f3, #2a1a1a);
    border-bottom: 1px solid light-dark(#f5c6cb, #4a2020);
    flex-shrink: 0;
}

.error-text {
    color: light-dark(#d30000, #ff6b6b);
}

/* ── Investigation Mode ───────────────────────────────────── */

.mode-toggle-row {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 6px 12px;
    border-bottom: 1px solid light-dark(#d2d2d7, #2a2a2e);
    background: light-dark(#fafafa, #18181a);
    flex-shrink: 0;
}

.mode-toggle-label {
    font-size: var(--font-size-sm);
    font-weight: 600;
    color: light-dark(#6e6e73, #98989d);
    margin-right: 4px;
}

/* ── Deadlock Detector Mockup ──────────────────────────────── */

.mockup-app {
    display: flex;
    flex-direction: column;
    height: 100%;
    overflow: hidden;
    background: var(--surface-bg);
}

/* Process pill */
.mockup-proc-pill {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-size: 11px;
    font-weight: 700;
    padding: 2px 8px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    font-family: var(--font-ui);
    transition: opacity 120ms ease;
}

.mockup-proc-pill:hover {
    opacity: 0.8;
}

.mockup-proc-pill--connected {
    background: light-dark(#e8f5e9, #1b3a1b);
    color: light-dark(#2e7d32, #66bb6a);
}

.mockup-proc-pill--disconnected {
    background: light-dark(#ffebee, #3a1b1b);
    color: light-dark(#c62828, #ef9a9a);
}

/* Modal */
.mockup-modal-backdrop {
    position: fixed;
    inset: 0;
    background: light-dark(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.6));
    display: grid;
    place-items: center;
    z-index: 1000;
}

.mockup-modal {
    background: var(--surface-raised);
    border: 1px solid var(--border);
    border-radius: 10px;
    width: min(560px, calc(100vw - 48px));
    max-height: 80vh;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    box-shadow: 0 16px 48px light-dark(rgba(0, 0, 0, 0.12), rgba(0, 0, 0, 0.5));
}

.mockup-modal-header {
    display: flex;
    align-items: center;
    padding: 12px 16px;
    border-bottom: 1px solid var(--border-subtle);
    flex-shrink: 0;
}

.mockup-modal-title {
    font-weight: 700;
    font-size: var(--font-size-md);
    flex: 1;
}

.mockup-modal-body {
    flex: 1;
    min-height: 0;
    overflow-y: auto;
}

.mockup-modal-empty {
    padding: 32px;
    text-align: center;
    color: var(--text-muted);
    font-size: var(--font-size-sm);
}

/* Graph empty state */
.mockup-graph-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 12px;
    height: 100%;
    color: var(--text-muted);
    font-size: var(--font-size-sm);
}

.mockup-graph-empty-icon {
    color: var(--text-muted);
    opacity: 0.4;
}

.mockup-graph-empty-hint {
    font-size: 11px;
    color: var(--text-muted);
    opacity: 0.7;
}

.spinning {
    animation: spin 1s linear infinite;
}

.mockup-header-error {
    font-size: 11px;
    color: light-dark(#c62828, #ef9a9a);
    font-weight: 600;
    max-width: 300px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* Header */
.mockup-header {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 6px 12px;
    border-bottom: 1px solid var(--border);
    background: var(--surface-raised);
    font-size: var(--font-size-sm);
    flex-shrink: 0;
}

.mockup-header-title {
    font-weight: 800;
    font-size: var(--font-size-md);
    letter-spacing: -0.02em;
}

.mockup-header-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-size: 11px;
    font-weight: 600;
    padding: 2px 8px;
    border-radius: 10px;
    background: var(--surface-sunken);
    color: var(--text-secondary);
}

.mockup-header-badge--active {
    background: light-dark(#e8f5e9, #1b3a1b);
    color: light-dark(#2e7d32, #66bb6a);
}

.mockup-header-badge--recording {
    background: light-dark(#ffebee, #3a1b1b);
    color: light-dark(#c62828, #ef9a9a);
}

.mockup-header-badge--recording-warn {
    background: light-dark(#fff3e0, #3a2a0a);
    color: light-dark(#e65100, #ffab40);
}

.recording-dot {
    display: inline-block;
    width: 6px;
    height: 6px;
    border-radius: 999px;
    background: light-dark(#d30000, #ff6b6b);
    flex-shrink: 0;
    animation: pulse-danger 1.5s ease-in-out infinite;
}

.mockup-header-spacer {
    flex: 1;
}

/* Graph panel */
.mockup-graph-panel {
    display: flex;
    flex-direction: column;
    height: 100%;
    overflow: hidden;
}

.mockup-graph-toolbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    padding: 4px 8px;
    border-bottom: 1px solid var(--border-subtle);
    background: var(--surface-raised);
    font-size: 11px;
    flex-shrink: 0;
}

.mockup-graph-toolbar-left,
.mockup-graph-toolbar-right {
    display: flex;
    align-items: center;
    gap: 6px;
}

.mockup-graph-stat {
    color: var(--text-muted);
    font-family: var(--font-mono);
    font-size: 10px;
}

.mockup-graph-level-label {
    color: var(--text-muted);
    font-weight: 600;
}

.mockup-graph-flow {
    flex: 1;
    min-height: 0;
    position: relative;
}

.mockup-graph-flow .react-flow {
    height: 100%;
}

.mockup-graph-flow .react-flow__controls {
    background: var(--surface-raised);
    border: 1px solid var(--border);
    border-radius: 6px;
}

.mockup-graph-flow .react-flow__controls-button {
    background: var(--surface-raised);
    border-bottom: 1px solid var(--border);
    fill: var(--text-secondary);
}

.mockup-graph-flow .react-flow__controls-button:hover {
    background: var(--surface-hover);
}

.mockup-graph-flow .react-flow__controls-button:last-child {
    border-bottom: none;
}

/* Edges are selectable — cursor hint */
.mockup-graph-flow .react-flow__edge {
    cursor: pointer;
}

/* Hide ReactFlow's default selected-edge styling */
.mockup-graph-flow .react-flow__edge.selected .react-flow__edge-path {
    stroke: unset;
}

/* Subtle pulse on the outer selection glow */
.mockup-edge-glow {
    animation: mockup-edge-glow-pulse 2s ease-in-out infinite;
}

/* Inspector panel */
.mockup-inspector {
    display: flex;
    flex-direction: column;
    height: 100%;
    overflow: hidden;
    background: var(--surface-raised);
    border-left: 1px solid var(--border);
}

.mockup-inspector--collapsed {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    gap: 8px;
    padding: 10px 4px;
    width: 100%;
    height: 100%;
    background: var(--surface-raised);
    border: none;
    border-left: 1px solid var(--border);
    border-radius: 0;
    color: var(--text-primary);
    cursor: pointer;
    font: inherit;
    overflow: visible;
    transition: background 120ms ease;
}

.mockup-inspector--collapsed:hover {
    background: var(--surface-hover);
    color: var(--text-primary);
}

.mockup-inspector--collapsed:active {
    background: var(--surface-sunken);
}

.mockup-inspector-collapsed-label {
    writing-mode: vertical-rl;
    text-orientation: mixed;
    font-size: 11px;
    font-weight: 700;
    color: var(--text-secondary);
    letter-spacing: 0.04em;
}

.mockup-inspector-header {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 10px;
    border-bottom: 1px solid var(--border-subtle);
    font-size: var(--font-size-sm);
    font-weight: 700;
    line-height: 1;
    color: var(--text-primary);
    flex-shrink: 0;
}

.mockup-inspector-header .ui-action-button {
    margin-left: auto;
}

.mockup-inspector-body {
    flex: 1;
    min-height: 0;
    overflow-y: auto;
    padding: 8px;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.mockup-inspector-node-header {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 4px 0;
}

.mockup-inspector-node-header-text {
    flex: 1;
    min-width: 0;
}

.mockup-inspector-node-icon {
    display: grid;
    place-items: center;
    width: 28px;
    height: 28px;
    border-radius: 6px;
    background: light-dark(#f0f0f5, #28282e);
    color: var(--text-primary);
    flex-shrink: 0;
}

.mockup-inspector-node-icon--causal {
    background: light-dark(#fff0f0, #2a1414);
    color: light-dark(#d7263d, #ff6b81);
}

.mockup-inspector-node-kind {
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    color: var(--text-muted);
}

.mockup-inspector-node-label {
    font-size: var(--font-size-sm);
    font-weight: 700;
    font-family: var(--font-mono);
    color: var(--text-primary);
}

.mockup-inspector-alert-slot {
    min-height: 32px;
    display: flex;
    align-items: stretch;
}

.mockup-inspector-alert {
    flex: 1;
    font-size: 11px;
    padding: 6px 8px;
    border-radius: 4px;
    line-height: 1.4;
}

.mockup-inspector-alert code {
    font-family: var(--font-mono);
    font-size: 10px;
    padding: 1px 4px;
    border-radius: 3px;
    background: light-dark(rgba(0, 0, 0, 0.06), rgba(255, 255, 255, 0.08));
}

.mockup-inspector-alert--crit {
    background: light-dark(#fff0f0, #3a1818);
    color: light-dark(#c62828, #ff8a80);
    border: 1px solid light-dark(#ffcdd2, #5c2020);
}

.mockup-inspector-section {
    display: flex;
    flex-direction: column;
    gap: 2px;
    padding: 4px 0;
    border-top: 1px solid var(--border-subtle);
}

.mockup-inspector-mono {
    font-family: var(--font-mono);
    font-size: 11px;
    color: var(--text-primary);
}

.mockup-inspector-muted {
    color: var(--text-tertiary);
    font-style: italic;
}

.mockup-inspector-crit {
    font-weight: 700;
    font-family: var(--font-mono);
    color: light-dark(#c62828, #ff8a80);
}

.mockup-inspector-warn {
    font-weight: 700;
    font-family: var(--font-mono);
    color: light-dark(#e65100, #ffab40);
}

.mockup-inspector-raw-head {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 11px;
    font-weight: 700;
    color: var(--text-secondary);
    padding: 4px 0;
}

/* ── Metadata tree ────────────────────────────────────────── */

.mockup-meta-tree {
    padding: 4px 0;
    font-family: var(--font-mono);
    font-size: 11px;
    line-height: 1.6;
}

.mockup-meta-leaf {
    display: flex;
    align-items: baseline;
    gap: 8px;
    padding: 1px 0;
}

.mockup-meta-key {
    color: var(--text-secondary);
    flex-shrink: 0;
}

.mockup-meta-value {
    color: var(--text-primary);
}

.mockup-meta-value--string {
    color: light-dark(#2a7e4f, #7ec699);
}

.mockup-meta-value--number {
    color: light-dark(#1a5fb4, #7aadff);
}

.mockup-meta-value--boolean {
    color: light-dark(#a0522d, #e6a86c);
}

.mockup-meta-hint {
    color: var(--text-tertiary);
    font-size: 10px;
}

.mockup-meta-toggle {
    display: flex;
    align-items: center;
    gap: 4px;
    background: none;
    border: none;
    color: inherit;
    font: inherit;
    cursor: pointer;
    padding: 1px 0;
    width: 100%;
    text-align: left;
}

.mockup-meta-toggle:hover .mockup-meta-key {
    color: var(--text-primary);
}

.mockup-meta-branch {
    /* nesting container */
}

/* ── Mockup graph nodes ───────────────────────────────────── */

.mockup-node {
    display: flex;
    gap: 8px;
    padding: 8px 10px;
    border-radius: 8px;
    font-family: var(--font-mono);
    white-space: nowrap;
    background: var(--surface-raised);
    border: 1px solid var(--border);
    color: var(--text-primary);
    align-items: center;
}

.mockup-node-icon {
    display: grid;
    place-items: center;
    flex-shrink: 0;
    width: 20px;
    color: var(--text-secondary);
}

.mockup-node-content {
    display: flex;
    flex-direction: column;
    gap: 4px;
    min-width: 0;
}

.mockup-node-main {
    font-size: 11px;
    font-weight: 600;
}

.mockup-node--cycle {
    border: 2px solid light-dark(#d7263d, #ff6b81);
    background: light-dark(#fff5f5, #2a1414);
}

.mockup-node--cycle .mockup-node-icon {
    color: light-dark(#d7263d, #ff6b81);
}

.mockup-node--selected {
    outline: 2px solid light-dark(#3b82f6, #60a5fa);
    outline-offset: 2px;
}

.mockup-node--scope {
    border-color: hsl(var(--scope-h) 70% 45% / 0.58);
    background: hsl(var(--scope-h) 90% 54% / 0.1);
}

.mockup-node--scope .mockup-node-icon {
    color: hsl(var(--scope-h) 70% 40%);
}

.mockup-node-label {
    overflow: hidden;
    text-overflow: ellipsis;
}

.mockup-node-details {
    display: flex;
    align-items: baseline;
    gap: 6px;
}

.mockup-node-dot {
    color: var(--text-tertiary);
    font-size: 11px;
    line-height: 1;
    padding: 0 0.4em;
}

.mockup-node-stat {
    color: var(--text-secondary);
    font-size: 11px;
    font-weight: 500;
}

.mockup-node-stat--crit {
    color: light-dark(#d30000, #ff6b6b);
    font-weight: 700;
}

.mockup-node-stat--warn {
    color: light-dark(#bf5600, #ffa94d);
    font-weight: 700;
}

.mockup-node--stat-crit {
    border-color: light-dark(#d30000, #ff6b6b);
    background: light-dark(#fff5f5, #2a1414);
}

.mockup-node--stat-crit .mockup-node-icon {
    color: light-dark(#d30000, #ff6b6b);
}

.mockup-node--stat-warn {
    border-color: light-dark(#bf5600, #ffa94d);
    background: light-dark(#fff9f0, #2a1f10);
}

.mockup-node--stat-warn .mockup-node-icon {
    color: light-dark(#bf5600, #ffa94d);
}

/* ── Ghost nodes ─────────────────────────────────────────── */

.mockup-node--ghost,
.mockup-channel-pair--ghost {
    opacity: 0.25;
    filter: saturate(0);
}

/* ── Channel pair node ───────────────────────────────────── */

.mockup-channel-pair {
    display: flex;
    flex-direction: column;
    gap: 5px;
    padding: 7px 10px;
    border-radius: 8px;
    font-family: var(--font-mono);
    white-space: nowrap;
    background: var(--surface-raised);
    border: 1px solid var(--border);
    color: var(--text-primary);
    min-width: 196px;
}

.mockup-channel-pair--selected {
    outline: 2px solid light-dark(#3b82f6, #60a5fa);
    outline-offset: 2px;
}

.mockup-channel-pair--scope {
    border-color: hsl(var(--scope-h) 70% 45% / 0.58);
    background: hsl(var(--scope-h) 90% 54% / 0.1);
}

.mockup-channel-pair--scope .mockup-channel-pair-icon {
    color: hsl(var(--scope-h) 70% 40%);
}

.mockup-channel-pair--stat-crit {
    border-color: light-dark(#d30000, #ff6b6b);
    background: light-dark(#fff5f5, #2a1414);
}

.mockup-channel-pair--stat-warn {
    border-color: light-dark(#bf5600, #ffa94d);
    background: light-dark(#fff9f0, #2a1f10);
}

.mockup-channel-pair-header {
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: 11px;
    font-weight: 600;
    color: var(--text-primary);
    overflow: hidden;
    padding-bottom: 3px;
    border-bottom: 1px solid var(--border-subtle);
}

.mockup-channel-pair-icon {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0;
    color: var(--text-secondary);
    flex-shrink: 0;
    line-height: 1;
}

.mockup-channel-pair-name {
    overflow: hidden;
    text-overflow: ellipsis;
}

.mockup-channel-pair-rows {
    display: flex;
    flex-direction: column;
    gap: 3px;
}

.mockup-channel-pair-row {
    display: flex;
    flex-direction: row;
    align-items: baseline;
    gap: 5px;
    font-size: 11px;
}

.mockup-channel-pair-row-label {
    font-size: 10px;
    font-weight: 700;
    color: var(--text-tertiary);
    width: 16px;
    flex-shrink: 0;
    text-transform: uppercase;
    letter-spacing: 0.03em;
}

/* ── Scope subgraph container ───────────────────────────── */

.mockup-scope-group {
    width: 100%;
    height: 100%;
    border: 1px solid var(--border-subtle);
    border-radius: 10px;
    background: light-dark(rgba(31, 41, 55, 0.03), rgba(255, 255, 255, 0.02));
    box-shadow: inset 0 1px 0 light-dark(rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.03));
}

.mockup-scope-group-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    padding: 6px 8px;
    border-bottom: 1px dashed var(--border-subtle);
    font-family: var(--font-mono);
    font-size: 10px;
    font-weight: 700;
    color: var(--text-muted);
}

.mockup-scope-group-label {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.mockup-scope-group-meta {
    color: var(--text-tertiary);
    font-weight: 600;
    flex-shrink: 0;
}

/* ── Inspector additions ─────────────────────────────────── */

.mockup-inspector-subsection-label {
    padding: 6px 16px 2px;
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    color: var(--text-tertiary);
}

.mockup-inspector-node-icon--channel-pair {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 1px;
    font-family: var(--font-mono);
    font-weight: 700;
    color: var(--text-secondary);
}

.mockup-inspector-buffer-bar {
    height: 4px;
    background: var(--surface-3, #333);
    border-radius: 2px;
    margin-top: 3px;
    overflow: hidden;
    min-width: 80px;
}

.mockup-inspector-buffer-fill {
    height: 100%;
    border-radius: 2px;
    transition: width 0.2s;
}

.mockup-inspector-buffer-fill--ok {
    background: light-dark(#2d9a47, #4ade80);
}

.mockup-inspector-buffer-fill--warn {
    background: light-dark(#bf5600, #ffa94d);
}

.mockup-inspector-buffer-fill--crit {
    background: light-dark(#d30000, #ff6b6b);
}

.mockup-inspector-empty {
    padding: 24px 16px;
    text-align: center;
    color: var(--text-tertiary);
    font-size: 12px;
}

/* ── Inspector diff section ──────────────────────────────── */

.mockup-inspector-diff {
    display: flex;
    flex-direction: column;
    gap: 4px;
    padding: 6px 8px;
    border-radius: 4px;
    background: light-dark(#f0f4ff, #14193a);
    border: 1px solid light-dark(#c7d7f9, #253672);
    font-size: 11px;
}

.mockup-inspector-diff-row {
    display: flex;
    align-items: center;
    gap: 5px;
    font-family: var(--font-mono);
}

.mockup-inspector-diff-label {
    color: var(--text-muted);
    font-weight: 600;
    min-width: 44px;
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.04em;
}

.mockup-inspector-diff-from {
    color: var(--text-secondary);
    text-decoration: line-through;
    opacity: 0.7;
}

.mockup-inspector-diff-arrow {
    color: var(--text-tertiary);
    font-size: 10px;
}

.mockup-inspector-diff-to {
    color: light-dark(#1a56db, #7aadff);
    font-weight: 600;
}

/* ── Source link style ───────────────────────────────────── */

.mockup-inspector-source-link {
    font-family: var(--font-mono);
    font-size: 11px;
    color: light-dark(#1a5fb4, #7aadff);
    text-decoration: none;
}

.mockup-inspector-source-link:hover {
    text-decoration: underline;
}

/* ---- Live mode scaffold styles ---- */
.page {
    color: #111827;
    font-family: var(--font-ui);
    background: radial-gradient(circle at top left, #eef6ff, #f9fafb 44%);
    margin: 0 auto;
    max-width: 1400px;
    padding: 1.5rem;
}

.topbar {
    align-items: flex-start;
    display: flex;
    gap: 1rem;
    justify-content: space-between;
    margin-bottom: 1rem;
}

.topbar h1 {
    margin: 0;
    font-size: 1.6rem;
}

.topbar p {
    margin: 0.4rem 0 0;
    color: #475569;
}

.topbar-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 0.6rem;
}
